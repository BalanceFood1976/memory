<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ì¹´ë“œ ë’¤ì§‘ê¸° ê²Œì„ - íƒ€ì´ë¨¸ ë²„ì „</title>
<meta name="color-scheme" content="light">
<style>
  :root { --tile: clamp(64px, 18vw, 92px); --gap: 10px; }
  html, body { margin:0; padding:0; background:#ffffff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color:#0f172a; }
  .container { max-width: 520px; margin: 24px auto; padding: 0 12px; }
  .game {
    background:#fff; border:2px solid #e5e7eb; border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,.08); padding:20px; text-align:center;
  }
  h1 { margin:0 0 6px; font-size:22px; }
  p.lead { margin:0 0 12px; color:#475569; }
  .controls { display:flex; justify-content:center; align-items:center; gap:8px; margin:10px 0 12px; }

  /* âœ… ë²„íŠ¼/ì¹´ë“œ í¬ì»¤ìŠ¤ í…Œë‘ë¦¬ ì œê±° (ë¸Œë¼ìš°ì € ì „ë°˜ ì»¤ë²„) */
  button.btn, .card {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    -webkit-appearance: none;
    appearance: none;
  }
  button.btn:focus, button.btn:focus-visible,
  .card:focus, .card:focus-visible {
    outline: none !important;
    box-shadow: none !important;
  }
  /* íŒŒì´ì–´í­ìŠ¤ êµ¬í˜• ëŒ€ì‘ */
  button.btn::-moz-focus-inner, .card::-moz-focus-inner { border: 0 !important; }

  button.btn {
    padding:10px 14px; border-radius:8px; background:#2563eb; color:#fff;
    font-weight:700; cursor:pointer; touch-action:manipulation;
  }
  button.btn:active { transform: translateY(1px); }

  #timer { font-weight:700; }

  #board {
    display:grid; grid-template-columns: repeat(4, var(--tile)); gap: var(--gap); justify-content:center;
  }
  .note { font-size:12px; color:#64748b; margin-top:8px; }

  .card {
    width:var(--tile); height:var(--tile); border-radius:10px; user-select:none;
    display:flex; align-items:center; justify-content:center; font-size:28px; cursor:pointer;
    background:#2563eb; color:#fff; transition:background .15s ease;
    touch-action: manipulation;
  }
  .card.flipped { background:#f1f5f9; color:#0f172a; }
  .card.matched { background:#22c55e; color:#fff; cursor:default; }
</style>
</head>
<body>
  <div class="container">
    <div class="game" role="group" aria-label="ì¹´ë“œ ë’¤ì§‘ê¸° ê²Œì„">
      <h1>ì¹´ë“œ ë’¤ì§‘ê¸° ê²Œì„</h1>
      <p class="lead">ê°™ì€ ê·¸ë¦¼ì„ ëª¨ë‘ ë§ì¶”ë©´ íƒ€ì´ë¨¸ê°€ ë©ˆì¶¥ë‹ˆë‹¤.</p>

      <div class="controls">
        <button id="start" class="btn" type="button" aria-label="ê²Œì„ ì‹œì‘">ì‹œì‘</button>
        <button id="reset" class="btn" type="button" aria-label="ë‹¤ì‹œ ì‹œì‘">ë‹¤ì‹œ ì‹œì‘</button>
        <span id="timer" aria-live="polite">â± 0.0ì´ˆ</span>
      </div>

      <div id="board" aria-live="polite" aria-label="ì¹´ë“œ ë³´ë“œ"></div>
      <div class="note">íŒ: ì‹œì‘ì„ ëˆ„ë¥´ë©´ ì¹´ë“œê°€ ì„ì´ê³  ì‹œê°„ì´ íë¦…ë‹ˆë‹¤.</div>
    </div>
  </div>

<script>
(()=> {
  const EMOJIS = ["ğŸ","ğŸŒ","ğŸ‡","ğŸ’","ğŸ¥","ğŸ","ğŸ‰","ğŸ‘"]; // 4x4 (8ìŒ)
  const boardEl = document.getElementById('board');
  const startBtn = document.getElementById('start');
  const resetBtn = document.getElementById('reset');
  const timerEl = document.getElementById('timer');

  let first = null, lock = false, matches = 0;
  let running = false, startAt = 0, rafId = 0;

  function shuffle(a){
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function buildBoard(){
    boardEl.innerHTML = '';
    const cards = shuffle([...EMOJIS, ...EMOJIS]);
    for(const sym of cards){
      const card = document.createElement('button');
      card.type = 'button';
      card.className = 'card';
      card.dataset.symbol = sym;
      card.setAttribute('aria-label', 'ì¹´ë“œ ë’¤ì§‘ê¸°');
      card.addEventListener('click', onFlip, {passive:true});
      boardEl.appendChild(card);
    }
  }

  function onFlip(e){
    if(!running) return;
    const el = e.currentTarget;
    if(lock || el.classList.contains('flipped') || el.classList.contains('matched')) return;

    flipOpen(el);

    if(!first){ first = el; return; }

    lock = true;
    if(first.dataset.symbol === el.dataset.symbol){
      setMatched(first);
      setMatched(el);
      matches++;
      resetPick();

      if(matches === EMOJIS.length){
        running = false;
        cancelAnimationFrame(rafId);
        setTimeout(()=> {
          alert('í´ë¦¬ì–´! ê¸°ë¡: ' + timerEl.textContent);
        }, 150);
      }
    }else{
      setTimeout(()=> {
        flipClose(first);
        flipClose(el);
        resetPick();
      }, 650);
    }
  }

  function flipOpen(el){
    el.classList.add('flipped');
    el.textContent = el.dataset.symbol;
  }
  function flipClose(el){
    el.classList.remove('flipped');
    el.textContent = '';
  }
  function setMatched(el){
    el.classList.add('matched');
    el.textContent = el.dataset.symbol;
  }
  function resetPick(){ first = null; lock = false; }

  function startTimer(){
    startAt = performance.now();
    cancelAnimationFrame(rafId);
    const tick = (t)=>{
      if(!running) return;
      const sec = ((t - startAt) / 1000).toFixed(1);
      timerEl.textContent = `â± ${sec}ì´ˆ`;
      rafId = requestAnimationFrame(tick);
    };
    rafId = requestAnimationFrame(tick);
  }

  // ë²„íŠ¼ë“¤
  startBtn.addEventListener('click', () => {
    matches = 0;
    running = true;
    timerEl.textContent = 'â± 0.0ì´ˆ';
    buildBoard();
    startTimer();
  });

  resetBtn.addEventListener('click', () => {
    matches = 0;
    running = false;
    cancelAnimationFrame(rafId);
    timerEl.textContent = 'â± 0.0ì´ˆ';
    buildBoard();
  });

  // ì²« ë¡œë“œ: ë³´ë“œë§Œ í‘œì‹œ(ì‹œì‘ ì „ì´ë¼ ë’¤ì§‘ê¸° ë™ì‘ ì•ˆ í•¨)
  buildBoard();
})();
</script>
</body>
</html>
